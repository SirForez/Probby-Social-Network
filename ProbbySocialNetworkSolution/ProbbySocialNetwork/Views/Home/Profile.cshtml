@model ProbbySocialNetwork.Models.ViewModels.ProfileViewModel

@{
    ViewBag.Title = "Profile";
}

<div class="container">
    <div class="lhsNav">
        <img src="http://fc06.deviantart.net/fs49/f/2009/220/b/0/Spongebob_4_150x150_PNG_by_somemilk.png">
        <p>@Model.currentUser.UserName's Profile</p>
    </div>
    <div class="theContent">
        <section>
            <h4>Create Status</h4>
            @using (Html.BeginForm("CreateStatus", "Status", FormMethod.Post, new { id = "statusForm" }))
            {
                <input type="hidden" name="userid" value="" />
                <div class="form-horizontal">
                    <label class="sr-only" for="statusText">Status</label>
                    <textarea class="form-control" rows="4" id="statusText" name="statusText"></textarea>
                    <input type="checkbox" id="imageortext" name="imageOrText" value="image" />This is an image<br />
                    <button type="submit" class="btn btn-primary">Post</button>
                </div>
                @Html.ValidationSummary(false)
            }

        </section>

        @using ProbbySocialNetwork.Models
        @foreach (Status s in Model.currentUserStatusHistory)
        {
            <div id="status">
                <h3>
                    @Model.currentUser.UserName
                </h3>
                <p>
                    @if (s.Post == null)
                    {
                        <img src="@s.MediaURL" alt="image" />
                    }
                    else
                    {
                        @s.Post
                    }
                    | @s.Date |
                    @if (Model.currentUser.Id == s.UserID)
                    {
                        @Html.ActionLink("Remove this post", "RemoveStatus", "Status", routeValues: s.ID, htmlAttributes: new { title = "Remove" })
                    }
                </p>
                <div id="status-comment">
                    @foreach (Comment c in Model.commentsForStatuses)
                    {
                        if (c.StatusID == s.ID)
                        {
                            <span id="status-comment-body" class="comment">
                                <p>
                                    @c.UserName: @c.Body | @c.DateInserted
                                </p>
                            </span>
                        }
                    }
                </div>
                <div>
                    @using (Html.BeginForm("CreateComment", "Status", FormMethod.Post, new { id = "commentForm" }))
                    {
                    <input type="hidden" name="statusID" value="@s.ID" />
                    <div class="form-horizontal">
                        <label class="sr-only" for="commentText">Status</label>
                        <textarea class="form-control" rows="2" id="commentText" name="commentText"></textarea>
                        <button type="submit" class="btn btn-primary">Post</button>
                    </div>
                    @Html.ValidationSummary(false)
                    }
                </div>
            </div> 
        }
    </div>
</div>

        @*
    <h2>
        @Model.currentUser.UserName's Profile
    </h2>

    @using ProbbySocialNetwork.Models
    @foreach(Status s in Model.currentUserStatusHistory)
    {
        <h3>
            @s.Date
        </h3>
        <p>
            @s.Post
        </p>
        foreach(Comment c in Model.commentsForStatuses)
        {
            if (c.StatusID == s.ID)
            {
                <p>
                    @c.Body
                    @c.DateInserted
                </p>
            }
        }
    }
*@
